<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" href="css/updates.css">
</head>
<body>
  <script>
    // Function to get URL parameter value by name
    function getUrlParameter(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

    const name = getUrlParameter('name'); // Get the 'name' parameter from the URL

    if (!name) {
      console.error('Name parameter is missing');
      document.body.innerHTML = 'Name parameter is missing';
    } else {
      // Fetch the updateTitles.json file to set the title
      fetch('updateTitles.json')
        .then(response => response.json())
        .then(titleData => {
          if (titleData[name]) {
            // Set the title tag to the value of {name} in updateTitles.json
            document.title = titleData[name];
          } else {
            // If title not found, set the title to the URL parameter 'name'
            document.title = name;
          }
        })
        .catch(error => {
          console.error('Error loading updateTitles.json:', error);
          // If there's an error loading updateTitles.json, set the title to the URL parameter 'name'
          document.title = name;
        });

      // Use Promise.all to fetch recapUpdates.json and blogUpdates.json simultaneously
      Promise.all([
        fetch('recapUpdates.json').then(response => response.json()),
        fetch('Blog_Updates.json').then(response => response.json())
      ])
.then(([recapData, blogData]) => {
      
    // Handle recapUpdates content
  const recap = recapData[name].body,
        blog = blogData[name].blogBody;
  if (recap) {
    const recapDiv = 
      document.createElement('div');
    recapDiv.id = 'recap';
    recapDiv.innerHTML = recap || '';
    document.body.appendChild(recapDiv);
  }

  // Handle blogUpdates content
  if (blog) {
    const blogDiv=
      document.createElement('div');
    blogDiv.id = 'blog';
    blogDiv.innerHTML = blog;
    document.body.appendChild(blogDiv);
  }
})
.catch(error => {
  console.error('Error fetching updates:', error);
});

}
  </script>
</body>
</html>